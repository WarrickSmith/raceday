# System Architecture Document: RaceDay v4.7

## Table of Contents

- [System Architecture Document: RaceDay v4.7](#table-of-contents)
  - [1. System Overview](./1-system-overview.md)
  - [2. Microservices Backend Architecture](./2-microservices-backend-architecture.md)
    - [2.1. Daily Data Pipeline Functions](./2-microservices-backend-architecture.md#21-daily-data-pipeline-functions)
      - [daily-meetings (17:00 UTC)](./2-microservices-backend-architecture.md#daily-meetings-1700-utc)
      - [daily-races (17:10 UTC)](./2-microservices-backend-architecture.md#daily-races-1710-utc)
      - [daily-entrants (17:20 UTC)](./2-microservices-backend-architecture.md#daily-entrants-1720-utc)
    - [2.2. Real-time Functions](./2-microservices-backend-architecture.md#22-real-time-functions)
      - [enhanced-race-poller (HTTP-triggered, Master Coordination)](./2-microservices-backend-architecture.md#enhanced-race-poller-http-triggered-master-coordination)
      - [master-race-scheduler (Scheduled, Autonomous Coordination)](./2-microservices-backend-architecture.md#master-race-scheduler-scheduled-autonomous-coordination)
      - [race-data-poller (Dynamic Schedule, Legacy)](./2-microservices-backend-architecture.md#race-data-poller-dynamic-schedule-legacy)
      - [single-race-poller (HTTP-triggered, Legacy)](./2-microservices-backend-architecture.md#single-race-poller-http-triggered-legacy)
      - [batch-race-poller (Scheduled, Legacy)](./2-microservices-backend-architecture.md#batch-race-poller-scheduled-legacy)
      - [alert-evaluator (Event-triggered)](./2-microservices-backend-architecture.md#alert-evaluator-event-triggered)
    - [2.3. Enhanced Functions (v4.7)](./2-microservices-backend-architecture.md#23-enhanced-functions-v47)
      - [money-flow-tracker (Event-triggered)](./2-microservices-backend-architecture.md#money-flow-tracker-event-triggered)
      - [race-pools-aggregator (Event-triggered)](./2-microservices-backend-architecture.md#race-pools-aggregator-event-triggered)
      - [jockey-silks-enricher (HTTP-triggered)](./2-microservices-backend-architecture.md#jockey-silks-enricher-http-triggered)
  - [3. Frontend Architecture (Next.js 15+)](./3-frontend-architecture-nextjs-15.md)
    - [3.1. Data Fetching Strategy](./3-frontend-architecture-nextjs-15.md#31-data-fetching-strategy)
    - [3.2. Enhanced Component Architecture (v4.7)](./3-frontend-architecture-nextjs-15.md#32-enhanced-component-architecture-v47)
    - [3.3. Enhanced Race Interface Implementation (v4.7)](./3-frontend-architecture-nextjs-15.md#33-enhanced-race-interface-implementation-v47)
      - [Data Fetching Strategy](./3-frontend-architecture-nextjs-15.md#data-fetching-strategy)
      - [Enhanced Grid Component Architecture](./3-frontend-architecture-nextjs-15.md#enhanced-grid-component-architecture)
  - [4. Database Schema (Appwrite)](./4-database-schema-appwrite.md)
    - [4.1. Core Collections](./4-database-schema-appwrite.md#41-core-collections)
    - [4.2. Optimized Indexes](./4-database-schema-appwrite.md#42-optimized-indexes)
  - [5. Key Architectural Improvements](./5-key-architectural-improvements.md)
    - [5.1. Resource Management](./5-key-architectural-improvements.md#51-resource-management)
    - [5.2. Error Handling & Resilience](./5-key-architectural-improvements.md#52-error-handling-resilience)
    - [5.3. Real-time Performance](./5-key-architectural-improvements.md#53-real-time-performance)
  - [6. Tech Stack](./6-tech-stack.md)
    - [6.1. Frontend](./6-tech-stack.md#61-frontend)
      - [6.1.1. Core Framework](./6-tech-stack.md#611-core-framework)
      - [6.1.2. Architecture Pattern](./6-tech-stack.md#612-architecture-pattern)
      - [6.1.3. Performance Optimizations](./6-tech-stack.md#613-performance-optimizations)
      - [6.1.4. UI and Styling](./6-tech-stack.md#614-ui-and-styling)
      - [6.1.5. State Management](./6-tech-stack.md#615-state-management)
      - [6.1.6. Data Fetching Strategy](./6-tech-stack.md#616-data-fetching-strategy)
    - [6.2. Backend Services](./6-tech-stack.md#62-backend-services)
      - [6.2.1. Primary Platform](./6-tech-stack.md#621-primary-platform)
      - [6.2.2. Appwrite SDK Strategy](./6-tech-stack.md#622-appwrite-sdk-strategy)
      - [6.2.3. Functions Architecture](./6-tech-stack.md#623-functions-architecture)
    - [6.3. Data Sources](./6-tech-stack.md#63-data-sources)
      - [6.3.1. External APIs](./6-tech-stack.md#631-external-apis)
      - [6.3.2. Database](./6-tech-stack.md#632-database)
    - [6.4. Performance Targets](./6-tech-stack.md#64-performance-targets)
      - [6.4.1. Core Web Vitals](./6-tech-stack.md#641-core-web-vitals)
      - [6.4.2. Application Metrics](./6-tech-stack.md#642-application-metrics)
      - [6.4.3. Monitoring and Analysis](./6-tech-stack.md#643-monitoring-and-analysis)
  - [7. Source Tree](./7-source-tree.md)
  - [8. Deployment Architecture](./8-deployment-architecture.md)
    - [8.1. Function Specifications](./8-deployment-architecture.md#81-function-specifications)
    - [8.2. Deployment Pipeline](./8-deployment-architecture.md#82-deployment-pipeline)
  - [9. Performance Characteristics](./9-performance-characteristics.md)
    - [9.1. Function Performance Targets](./9-performance-characteristics.md#91-function-performance-targets)
    - [9.2. Enhanced Frontend Performance Targets (v4.7)](./9-performance-characteristics.md#92-enhanced-frontend-performance-targets-v47)
  - [10. Migration to v4.7 Enhanced Race Interface](./10-migration-to-v47-enhanced-race-interface.md)
    - [10.1. New Features & Components](./10-migration-to-v47-enhanced-race-interface.md#101-new-features-components)
    - [10.2. Data Migration Strategy](./10-migration-to-v47-enhanced-race-interface.md#102-data-migration-strategy)
    - [10.3. Deployment Steps (v4.7)](./10-migration-to-v47-enhanced-race-interface.md#103-deployment-steps-v47)
  - [11. Success Metrics](./11-success-metrics.md)
    - [11.1. Technical Metrics](./11-success-metrics.md#111-technical-metrics)
    - [11.2. Enhanced Business Metrics (v4.7)](./11-success-metrics.md#112-enhanced-business-metrics-v47)
  - [12. Client Integration](./12-client-integration.md)
    - [12.1. Enhanced Real-Time Data Architecture](./12-client-integration.md#121-enhanced-real-time-data-architecture)
    - [12.2. Money Flow Timeline Integration](./12-client-integration.md#122-money-flow-timeline-integration)
    - [12.3. Implementation Guide](./12-client-integration.md#123-implementation-guide)
  - [13. Conclusion](./13-conclusion.md)
  - [14. Money Flow Timeline System Architecture](./14-money-flow-timeline-system-architecture.md)
    - [14.1. System Overview](./14-money-flow-timeline-system-architecture.md#141-system-overview)
    - [14.2. NZTAB API Data Acquisition](./14-money-flow-timeline-system-architecture.md#142-nztab-api-data-acquisition)
    - [14.3. Enhanced Server Processing](./14-money-flow-timeline-system-architecture.md#143-enhanced-server-processing)
    - [14.4. Timeline Calculation Logic](./14-money-flow-timeline-system-architecture.md#144-timeline-calculation-logic)
    - [14.5. Database Storage Strategy](./14-money-flow-timeline-system-architecture.md#145-database-storage-strategy)
    - [14.6. Client-Side Implementation](./14-money-flow-timeline-system-architecture.md#146-client-side-implementation)
    - [14.7. Mathematical Validation & Quality Assurance](./14-money-flow-timeline-system-architecture.md#147-mathematical-validation-quality-assurance)
    - [14.8. Development & Testing Tools](./14-money-flow-timeline-system-architecture.md#148-development-testing-tools)
    - [14.9. Race Status Handling](./14-money-flow-timeline-system-architecture.md#149-race-status-handling)
    - [14.10. Performance Characteristics](./14-money-flow-timeline-system-architecture.md#1410-performance-characteristics)
