# Story 1.2: Appwrite Environment and CI/CD Pipeline Setup

## Status

In Progress

## Story

**As a** developer,
**I want** to configure the Appwrite environment variables and set up a robust CI/CD pipeline using GitHub Actions,
**so that** the project is securely configured and automated checks are in place to ensure code quality and stability.

## Story Context

**Existing System Integration:**

- Integrates with: Next.js frontend, Appwrite Cloud backend
- Technology: Next.js, Appwrite, GitHub Actions
- Follows pattern: Standard environment variable management and CI/CD best practices

## Acceptance Criteria

**Functional Requirements:**

1.  An `.env.local` file is created in the root directory with the correct Appwrite configuration.
2.  The `.env.local` file is added to `.gitignore` to prevent it from being committed to source control.
3.  The Next.js application correctly loads the Appwrite configuration from the environment variables.
4.  A GitHub Actions workflow is created to automate testing, linting, and building the application.
5.  The workflow is triggered on every push and pull request to the `main` branch.
6.  A `docker-compose.yml` file is created to define the Next.js service, mapping port 3444 externally to port 3000 internally.
7.  A `Dockerfile.txt` is created to build the Next.js application.

**Quality Requirements:**

6.  The CI/CD pipeline successfully runs all checks without errors.
7.  The pipeline includes steps for installing dependencies, running tests, linting, and building the application.
8.  The pipeline provides clear feedback on the status of each check.

## Tasks / Subtasks

- [ ] Create `.env.local` file with Appwrite configuration (AC: 1, 2, 3)
  - [ ] Add `NEXT_PUBLIC_APPWRITE_ENDPOINT=https://appwrite.warricksmith.com/v1`
  - [ ] Add `NEXT_PUBLIC_APPWRITE_PROJECT_ID=racedaytest250701`
  - [ ] Update `.gitignore` to exclude `.env.local`
- [ ] Create GitHub Actions workflow file (`.github/workflows/ci.yml`) (AC: 4, 5, 6, 7, 8)
  - [ ] Define the workflow trigger (push and pull_request to `main`)
  - [ ] Add a job for running the CI checks
  - [ ] Add a step to check out the code
  - [ ] Add a step to set up Node.js
  - [ ] Add a step to install dependencies (`npm install`)
  - [ ] Add a step to run the linter (`npm run lint`)
  - [ ] Add a step to build the application (`npm run build`)
- [ ] Create `docker-compose.yml` to define the Next.js service (AC: 9)
- [ ] Create `Dockerfile.txt` to build the Next.js application (AC: 10)

## Dev Notes

**Technical Requirements:**

- Next.js 15+
- Appwrite Cloud
- GitHub Actions

**Integration Notes:**

- The Appwrite configuration is essential for connecting the frontend to the backend.
- The CI/CD pipeline will help maintain code quality and prevent regressions.

**Implementation Guidance:**

- Example `Dockerfile.txt` can be found at `docs/example-Dockerfile.txt`
- Example `docker-compose.yml` can be found at `docs/example-docker-compose.yml`
